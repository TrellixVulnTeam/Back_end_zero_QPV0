'use strict';

var Test = require('../test');
<<<<<<< HEAD
var EVENT_FILE_PRE_REQUIRE = require('../suite').constants
  .EVENT_FILE_PRE_REQUIRE;
=======
var EVENT_FILE_PRE_REQUIRE =
  require('../suite').constants.EVENT_FILE_PRE_REQUIRE;
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6

/**
 * TDD-style interface:
 *
 *      suite('Array', function() {
 *        suite('#indexOf()', function() {
 *          suiteSetup(function() {
 *
 *          });
 *
 *          test('should return -1 when not present', function() {
 *
 *          });
 *
 *          test('should return the index when present', function() {
 *
 *          });
 *
 *          suiteTeardown(function() {
 *
 *          });
 *        });
 *      });
 *
 * @param {Suite} suite Root suite.
 */
<<<<<<< HEAD
module.exports = function(suite) {
  var suites = [suite];

  suite.on(EVENT_FILE_PRE_REQUIRE, function(context, file, mocha) {
=======
module.exports = function (suite) {
  var suites = [suite];

  suite.on(EVENT_FILE_PRE_REQUIRE, function (context, file, mocha) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
    var common = require('./common')(suites, context, mocha);

    context.setup = common.beforeEach;
    context.teardown = common.afterEach;
    context.suiteSetup = common.before;
    context.suiteTeardown = common.after;
    context.run = mocha.options.delay && common.runWithSuite(suite);

    /**
     * Describe a "suite" with the given `title` and callback `fn` containing
     * nested suites and/or tests.
     */
<<<<<<< HEAD
    context.suite = function(title, fn) {
=======
    context.suite = function (title, fn) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
      return common.suite.create({
        title: title,
        file: file,
        fn: fn
      });
    };

    /**
     * Pending suite.
     */
<<<<<<< HEAD
    context.suite.skip = function(title, fn) {
=======
    context.suite.skip = function (title, fn) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
      return common.suite.skip({
        title: title,
        file: file,
        fn: fn
      });
    };

    /**
     * Exclusive test-case.
     */
<<<<<<< HEAD
    context.suite.only = function(title, fn) {
=======
    context.suite.only = function (title, fn) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
      return common.suite.only({
        title: title,
        file: file,
        fn: fn
      });
    };

    /**
     * Describe a specification or test-case with the given `title` and
     * callback `fn` acting as a thunk.
     */
<<<<<<< HEAD
    context.test = function(title, fn) {
=======
    context.test = function (title, fn) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
      var suite = suites[0];
      if (suite.isPending()) {
        fn = null;
      }
      var test = new Test(title, fn);
      test.file = file;
      suite.addTest(test);
      return test;
    };

    /**
     * Exclusive test-case.
     */

<<<<<<< HEAD
    context.test.only = function(title, fn) {
=======
    context.test.only = function (title, fn) {
>>>>>>> a9bf8e899dd3a809ebc987a4500df6bba9db6fe6
      return common.test.only(mocha, context.test(title, fn));
    };

    context.test.skip = common.test.skip;
  });
};

module.exports.description =
  'traditional "suite"/"test" instead of BDD\'s "describe"/"it"';
